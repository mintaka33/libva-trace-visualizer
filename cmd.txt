

ffmpeg -f lavfi -i testsrc2 -vframes 100 test.264

ffmpeg -loglevel verbose -hwaccel vaapi -i test.264 -f null -

# ffmpeg single thread
LIBVA_TRACE=./trace/ffmpeg ffmpeg -loglevel verbose -threads 1 -hwaccel vaapi -i test.264 -f null -

LIBVA_TRACE=./trace/ffmpeg_decode ffmpeg -loglevel verbose -hwaccel vaapi -i test.264 -f null -

# transcode

LIBVA_TRACE=./trace/ffmpeg_xcode ffmpeg -loglevel verbose -hwaccel vaapi -i test.264 -


ffmpeg -loglevel verbose -hwaccel vaapi -i test.264 -v:c h264_vaapi out.264

ffmpeg -v verbose -init_hw_device vaapi=hw:/dev/dri/renderD128 -filter_hw_device hw -hwaccel_output_format vaapi -hwaccel vaapi -c:v h264 \
-i test.264 -an -vf 'hwupload,scale_vaapi=w=640:h=480' -c:v hevc_vaapi -y out.265




